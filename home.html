
<html>
<head>
	<style>
		.card {
		    /* Add shadows to create the "card" effect */
		    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
		    transition: 0.3s;
		}

		/* On mouse-over, add a deeper shadow */
		.card:hover {
		    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
		}
	</style>
	<script>
		//USER DETAILS
		var current_faculty_id=sessionStorage.getItem("faculty_reg_no");  //to be fetched from sessions
	</script>
	<title>AMS</title>
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Yatra+One" rel="stylesheet">
	

	<!-----------------SCRIPT FOR CONNECTING FIREBASE------------------------->
	<script src="https://www.gstatic.com/firebasejs/5.4.2/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyAsDnXD02GeLCn59Wx2CgQqOwRqQo0_J7Q",
	    authDomain: "barcoder-c2af4.firebaseapp.com",
	    databaseURL: "https://barcoder-c2af4.firebaseio.com",
	    projectId: "barcoder-c2af4",
	    storageBucket: "barcoder-c2af4.appspot.com",
	    messagingSenderId: "88188653581"
	  };
	  firebase.initializeApp(config);

	  	var d = new Date();
		var weekday = new Array(7);
		weekday[0] =  "sunday";
		weekday[1] = "monday";
		weekday[2] = "tuesday";
		weekday[3] = "wednesday";
		weekday[4] = "thursday";
		weekday[5] = "friday";
		weekday[6] = "saturday";

		var n = weekday[d.getDay()];
	</script>
	<!-----------------SCRIPT FOR CONNECTING FIREBASE------------------------->
</head>

<style>
	body {
			   background-image: url("images/bg23.jpg");
			   background-color: #cccccc;
			   background-repeat: no-repeat;
			   background-size: cover;
			}
</style>

<body onload="load_details();">
	<div class="container-fluid">
		<nav class="navbar navbar-inverse navbar-fixed-top navpad1">
			<div class="container-fluid">
				<div class="navbar-header">
					<a href="#" class="navbar-brand" style="font-style: italic;">AMS</a>
				</div>
				<ul class="nav navbar-nav">
					<li><a href="#">Home</a></li>
					<li><a href="timetable.html">Time Table</a></li>
					<li><a href="markAttendance.html">Mark Attendance</a></li>
					<li><a href="announcements.html">Announcements</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="profile.html" id="set_faculty_name">Welcome</a></li>
					<li style="margin-right: 20px;"><a href="logout.html">Logout</a></li>
				</ul>
			</div>
		</nav>
		<br><br><br>
		<div class="container">
			<div style="margin-top: 80px; padding:10px; background-color: white; border-radius: 5px;" class="card">
					<h2 id="current_day"></h2>
					<table style="font-size: 12px;" class="table table-bordered table-responsive table-hover"  id="time_table_list" border="1">
						<thead>
							<tr>
							   <th>9-10</th>
							   <th>10-11</th>
							   <th>11-12</th>
							   <th>12-1</th>
							   <th>1-2</th>
							   <th>2-3</th>
							   <th>3-4</th>
							   <th>4-5</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td id="pt1"> </td>
								<td id="pt2"> </td>
								<td id="pt3"> </td>
								<td id="pt4"> </td>
								<td id="pt5"> </td>
								<td id="pt6"> </td>
								<td id="pt7"> </td>
								<td id="pt8"> </td>
							</tr>
							<tr>
								<td id="ptt1"> </td>
								<td id="ptt2"> </td>
								<td id="ptt3"> </td>
								<td id="ptt4"> </td>
								<td id="ptt5"> </td>
								<td id="ptt6"> </td>
								<td id="ptt7"> </td>
								<td id="ptt8"> </td>
							</tr>
						</tbody>
					</table>
				</div>
				<br><br><br>
				<div>
					<div class="col-md-4">
						<div class="col-md-12 card" style="margin-right: 5px; background-color: white; border-radius: 5px; padding: 5px;">
							<div class="col-md-3">
								<a href="markAttendance.html">
									<img src="images/mark_attendance.png" style="display: block; margin-left: auto; margin-right: auto; max-height: 50px; max-width: 50px" alt="">
								</a>
							</div>
							<div class="col-md-9">
								<h4><a href="markAttendance.html">Mark Attendance</a></h4>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="col-md-12 card" style="margin-right: 5px; background-color: white; border-radius: 5px; padding: 5px;">
							<div class="col-md-3">
								<a href="profile.html">
									<img src="images/profile.png" style="display: block; margin-left: auto; margin-right: auto; max-height: 50px; max-width: 50px" alt="">
								</a>
							</div>
							<div class="col-md-9">
								<h4><a href="profile.html">Profile Details</a></h4>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="col-md-12 card" style="margin-right: 5px; background-color: white; border-radius: 5px; padding: 5px;">
							<div class="col-md-3">
								<a href="timetable.html">
									<img src="images/timetable.png" style="display: block; margin-left: auto; margin-right: auto; max-height: 50px; max-width: 50px" alt="">
								</a>
							</div>
							<div class="col-md-9">
								<h4><a href="timetable.html">Weekely Timetable</a></h4>
							</div>
						</div>
					</div>
					<div class="col-md-4" style="margin-top: 10px;">
						<div class="col-md-12 card" style="margin-right: 5px; background-color: white; border-radius: 5px; padding: 5px;">
							<div class="col-md-3">
								<a href="announcements.html">
									<img src="images/announcement.png" style="display: block; margin-left: auto; margin-right: auto; max-height: 50px; max-width: 50px" alt="">
								</a>
							</div>
							<div class="col-md-9">
								<h4><a href="announcements.html">Announcements</a></h4>
							</div>
						</div>
					</div>
					<div class="col-md-4" style="margin-top: 10px;">
						<div class="col-md-12 card" style="margin-right: 5px; background-color: white; border-radius: 5px; padding: 5px;">
							<div class="col-md-3">
								<a href="studentAttendance.html">
									<img src="images/studentAttendance.png" style="display: block; margin-left: auto; margin-right: auto; max-height: 50px; max-width: 50px" alt="">
								</a>
							</div>
							<div class="col-md-9">
								<h4><a href="studentAttendance.html">Student Attendance</a></h4>
							</div>
						</div>
					</div>
					<div class="col-md-4" style="margin-top: 10px;">
						<div class="col-md-12 card" style="margin-right: 5px; background-color: white; border-radius: 5px; padding: 5px;">
							<div class="col-md-3">
								<a href="logout.html">
									<img src="images/logout.png" style="display: block; margin-left: auto; margin-right: auto; max-height: 50px; max-width: 50px" alt="">
								</a>
							</div>
							<div class="col-md-9">
								<h4><a href="logout.html">Logout</a></h4>
							</div>
						</div>
					</div>
				</div>
			</div>			
			
		</div>

</body>
<script>

	function load_details()
	{
		if(sessionStorage.getItem("faculty_name")==null)
		{
			window.location.href="index.html";
		}
		else
		{
			document.getElementById("set_faculty_name").innerHTML = sessionStorage.getItem("faculty_name");	
		}
	}

	//Printing current day
	var d2 = new Date();
		var weekday2 = new Array(7);
		weekday2[0] =  "Sunday";
		weekday2[1] = "Monday";
		weekday2[2] = "Tuesday";
		weekday2[3] = "Wednesday";
		weekday2[4] = "Thursday";
		weekday2[5] = "Friday";
		weekday2[6] = "Saturday";

		var n2 = weekday2[d2.getDay()];
	var actual_day=n2+"'s Time Table";
	document.getElementById("current_day").innerHTML=actual_day;

	//finding timetable
	var tblTimeTable = document.getElementById('time_table_list');
	var databaseRef = firebase.database().ref('FT/'+current_faculty_id+'/'+n+'/');
	//console.log("working");
	  
	databaseRef.once('value', function(snapshot) 
	{
		snapshot.forEach(function(childSnapshot) 
		{
		   var childKey = childSnapshot.key;
		   var childData = childSnapshot.val();
		   var section=childSnapshot.child('section').val();
		   var subject_code=childSnapshot.child('subject').val();
		   var subject_name= childSnapshot.child('subject_name').val();	
		   console.log('Time: '+childKey+" "+section+" "+subject_code+" "+subject_name);

		   if(childKey=='9')
		   {
		   		document.getElementById("pt1").innerHTML=" "+section;
		   		document.getElementById("ptt1").innerHTML=subject_code+" :"+subject_name;

		   }
		   if(childKey=='10')
		   {
		   		document.getElementById("pt2").innerHTML=" "+section;
		   		document.getElementById("ptt2").innerHTML=subject_code+" :"+subject_name;
		   }
		   if(childKey=='11')
		   {
		   		document.getElementById("pt3").innerHTML=" "+section;
		   		document.getElementById("ptt3").innerHTML=subject_code+" :"+subject_name;
		   }
		   if(childKey=='12')
		   {
		   		document.getElementById("pt4").innerHTML=" "+section;
		   		document.getElementById("ptt4").innerHTML=subject_code+" :"+subject_name;
		   }
		   if(childKey=='1')
		   {
		   		document.getElementById("pt5").innerHTML=" "+section;
		   		document.getElementById("ptt5").innerHTML=subject_code+" :"+subject_name;
		   }
		   if(childKey=='2')
		   {
		   		document.getElementById("pt6").innerHTML=" "+section;
		   		document.getElementById("ptt6").innerHTML=subject_code+" :"+subject_name;
		   }
		   if(childKey=='3')
		   {
		   		document.getElementById("pt7").innerHTML=" "+section;
		   		document.getElementById("ptt7").innerHTML=subject_code+" :"+subject_name;
		   }
		   if(childKey=='4')
		   {
		   		document.getElementById("pt8").innerHTML=" "+section;
		   		document.getElementById("ptt8").innerHTML=subject_code+" :"+subject_name;
		   }
		   
		   //console.log("testing");
		});
	});
</script>
</html>